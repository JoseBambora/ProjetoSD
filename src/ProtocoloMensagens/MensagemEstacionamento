package ProtocoloMensagens;
import java.nio.ByteBuffer;

public class MensagemEstacionamento extends Mensagem
{
    private final String codigo;
    private final int x;
    private final int y;

    public MensagemEstacionamento(int id,int x,int y, String codigo)
    {
        super(id);
        this.codigo = codigo;
        this.x = x;
        this.y = y;
    }
    
    public String getX() {
        return x;
    }

    public String getY() {
        return y;
    }
    public String getCodigo()
    {
        return codigo;
    }

    public Frame createFrame()
    {
        byte[] bytes = ByteBuffer.allocate(8 + this.getCodigo().getBytes().length)
                                 .putInt(this.getX()).putInt(this.getY()).put(this.getCodigo()).array();

        return new Frame(getId(),getTipo("Estacionamento"),total.getBytes());
    }
    public Frame createFrameResponse(boolean bool)
    {
        byte []b = new byte[1];
        if(!bool)
            b[0] = (byte) 1;
        return new Frame(getId(),getTipo("Autenticacao"),b);
    }
    public static MensagemAutenticacao receive(Frame frame)
    {
        byte []b = frame.data;
        ByteBuffer bb = ByteBuffer.wrap(b);
        int x = bb.getInt();
        int y = bb.getInt();
        byte [] strBytes = bb.array();
        String total = new String(strBytes);
        return new MensagemAutenticacao(frame.tag,user,pass);
    }
}
